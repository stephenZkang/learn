### 2021-08-20 07:39:45  星期五  

#### 1. Search API

- 两种方式
  URL search

  ​	在URL中使用参数，参数有 

  ​     q  查询语句 Query String Syntax
  
  ​     df 指定查询字段
  
  ​     Sort 排序/ from  起点  size  返回数量
  
  ​     Profile 	查看如何执行

  ​     pretty 返回格式话

  ​     作用：可在实际环境使用浏览器查询elasticsearch结果
  
  - 泛查询和指定字段查询
  
    ```shell
    #泛查询
    http://localhost:9200/movies/_search?q=2021
  
    #指定字段
  http://localhost:9200/movies/_search?q=title:2021
    ```
  
  - Term和Phrase
  
    ```shell
  #Term Beautiful Mind 等同于Beautiful OR MIND
    http://localhost:9200/movies/_search?q=title:"Beautiful Mind"
  
    #Phrase Beautiful Mind等同于Beautiful AND MIND Phrase保持前后顺序
  #分组
    http://localhost:9200/movies/_search?q=title:(Beautiful Mind)
  ```
  
    
  
  - 布尔操作
  
    AND OR NOT
    
  - 分组
  
    +代表must
    
    -代表not must
    
      
    
  - 范围查询
  
    ```shell
    #范围查询 区间表示[]闭区间 {} 开区间
    http://localhost:9200/movies/_search?q=year:{2019 TO 2018}
    
    #AND NOT OR 必须大写
    http://localhost:9200/movies/_search?q=title:(<=2021 AND >=1900)
    ```
  
  - 算术符号
  
    - year:>2010
    - year:(>2010&&<=2018)
    - year:(+>2010 +<=2018)
  
    ```shell
    http://localhost:9200/movies/_search?q=title:>2010
    ```
  
    
  
  - 通配符
  
    - ? 代表一位，*代表0~多个
    - title:mi?d
    - title:be*
    
  - 正则匹配
  
    - title:[bt]oy
    
  - 模糊查询和近似查询
  
    - title:befutifl~1 近似查询，输入不对也可以查询
    - title:befutifl~2 
    
  - 查询条数
  
    ```shell
    #from size
    http://localhost:9200/movies/_search?q=title:(<=2021 )&from=2&size=20
    
    ```
  
  - 
  
  Request Body
  
  - 

#### 2. 相关性

- 衡量相关性的标准
  查准率Precision - 尽可能返回较少的无关文档
  查全率Recall - 尽量返回较多的相关文档
  
  ![image-20210821121838611](E:\git\learn\img\image-20210821121838611.png)
  
- 相关性排名Ranking - 是否能够按照相关度进行排序