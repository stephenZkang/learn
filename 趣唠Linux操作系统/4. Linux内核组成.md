### Linux内核组成

我们采购了CPU、主板、显卡、网卡、硬盘、显示器、鼠标、键盘和一堆线组装了一台电脑。组装完毕后，我们需要安装一个操作系统。

#### 操作系统如何把这么多套复杂的东西管理起来的？

1. 桌面上的图标是啥？凭啥我再鼠标上一双击就会出来美丽的画面？
2. 为啥我敲键盘，某个位置会显示我想要的字符
3. 电脑怎么知道我鼠标点击的地方，又是怎么知道我要输入的地方
4. 再键盘输入a，为啥在显示器上画“a”

#### "双击QQ"这个过程，都需要哪些硬件？

1. 鼠标和键盘是计算机**输入设备**
2. 屏幕显示器是计算机的**输出设备**
3. 显示器上面显示的东西是由**显卡**控制的。
4. 输入设备是由**输入设备驱动**控制的。显卡会有显卡驱动，叫**输出设备驱动**

#### 点击QQ图标，操作系统全貌

1. 首先，鼠标双击会触发一个中断，在操作系统中调用**中断处理函数**。操作系统发现双击的是一个图标，准备启动QQ

2. 运行QQ，QQ怎么做，做什么，都是写在QQ程序里面的，而程序存放在文件系统中

3. 文件系统需要一个系统进行统一管理，称为**文件管理子系统**（File Management Subsystem）

4. 操作系统执行QQ的二进制执行文件，二进制文件是静态的，称为**程序**，而运行起来的QQ是不断进行的，称为**进程**

5. **系统调用**能列出来提供哪些接口可以调用，进程有需要的时候就可以去调用，任何一个程序要运行起来，都需要调用系统调用，创建进程

6. 在操作系统中，进程的执行也需要分配CPU进程执行，也就是按照程序里面的二进制代码执行，于是，为了管理进程，还需要一个**进程管理子系统**（Process Management Subsystem）。

7. 在操作系统中，不同的进程有不同的内存空间，但整个电脑内存就那么点儿，所以需要统一管理和分配，这就需要**内存管理子系统**（Memory Management Subsystem）

8. 当用户输入完毕，回车一下，还会通过键盘驱动程序告诉操作系统，操作系统会找到QQ，QQ会将用户输入发送到网络上。QQ进程不能直接发送网络包，需要调用系统调用，内核使用网卡驱动程序发送。这里就需要**设备子系统**和**网络子系统**。

   ![image-20200512092859533](D:\workIdea\learn\img\image-20200512092859533.png)

#### Linux内核源码地址，以及模块划分

地址：https://github.com/torvalds/linux，fork到自己库https://github.com/stephenZkang/linux

模块划分：

- kernel：内核管理核心代码，其中包含了进程管理子系统

- fs（file system）: 文件管理子系统

- mm（memory manage）内存管理子系统。CPU体系结构的内存管理。与物理内存管理相关的代码在arch/(某种架构)/mm

- net：网络子系统

- drivers：设备子系统。其中存放各种硬件的驱动程序，driver/block下存放块设别的驱动程序

  

​		

